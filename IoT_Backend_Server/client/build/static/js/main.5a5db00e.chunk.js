(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{13:function(e,t){e.exports={SERVER_URL:"http://140.113.123.90:9527/api/v1",CUSTOMER_URL:"http://140.113.123.90:9527/api/customer"}},15:function(e,t,a){e.exports=a.p+"static/media/logo1.1e1e9315.png"},35:function(e,t,a){e.exports=a.p+"static/media/cellphone.98eaec80.svg"},39:function(e,t,a){e.exports=a(97)},44:function(e,t,a){},45:function(e,t,a){},65:function(e,t,a){},87:function(e,t,a){},88:function(e,t,a){},89:function(e,t,a){},90:function(e,t,a){},97:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(17),s=a.n(c),l=(a(44),a(38)),i=a(11),o=a(2),m=a(3),u=a(6),d=a(4),h=a(5),v=a(35),f=a.n(v),E=(a(45),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={driverList:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return r.a.createElement("div",{className:"container"},r.a.createElement("div",{className:"row m-5 px-5"},r.a.createElement("div",{className:"col"}),r.a.createElement("div",{className:"col title-text"},"We are LOGISTALKS !"),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row m-5 px-5"},r.a.createElement("div",{className:"col"}),r.a.createElement("img",{src:f.a,className:"col phone-style",alt:"phone"}),r.a.createElement("div",{className:"col"})),r.a.createElement("div",{className:"row m-5 px-5"},r.a.createElement("div",{className:"col justify-content-center text-center"},r.a.createElement("h4",null,"\u64cd\u4f5c\u7c21\u6613"),r.a.createElement("h6",{className:"sub-title text-muted"},"\u6d88\u8cbb\u8005\u53ef\u4ee5\u5728\u5b98\u65b9line\u5e33\u865f\u4e0a\u5c31\u80fd\u8cfc\u8cb7\u5546\u54c1\u548c\u8ffd\u8e64\u8ca8\u7269\u8cc7\u8a0a")),r.a.createElement("div",{className:"col justify-content-center text-center"},r.a.createElement("h4",null,"\u638c\u63e1\u8ca8\u54c1\u5373\u6642\u4f4d\u7f6e"),r.a.createElement("h6",{className:"sub-title text-muted"},"\u53f8\u6a5f\u5373\u6642\u50b3\u9001GPS\u8cc7\u6599\uff0c\u7ba1\u7406\u8005\u8207\u6d88\u8cbb\u8005\u80fd\u53ca\u6642\u638c\u63e1\u8ca8\u54c1\u5373\u6642\u4f4d\u7f6e")),r.a.createElement("div",{className:"col justify-content-center text-center"},r.a.createElement("h4",null,"\u53f8\u6a5f\u81ea\u7531\u9078\u64c7\u5546\u54c1"),r.a.createElement("h6",{className:"sub-title text-muted"},"\u53f8\u6a5f\u5f9e\u516c\u53f8\u914d\u767c\u7684\u624b\u6a5f\u4e2d\u4f7f\u7528\u9001\u8ca8APP\u9078\u64c7\u60f3\u8981\u914d\u9001\u7684\u8ca8\u54c1"))))}}]),t}(n.Component)),p=a(1),b=a(10),g=a.n(b),N=(a(65),a(13)),y=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={orderList:[],inputText:""},a.getOrders=a.getOrders.bind(Object(p.a)(a)),a.setInputText=a.setInputText.bind(Object(p.a)(a)),a.parseOrders=a.parseOrders.bind(Object(p.a)(a)),a.formatTime=a.formatTime.bind(Object(p.a)(a)),a.linkToCustomer=a.linkToCustomer.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat(N.SERVER_URL,"/orders")).then(function(t){return e.parseOrders(t.data.orders)}).then(function(t){return e.getOrders(t)}).catch(function(e){return console.log(e)})}},{key:"parseOrders",value:function(e){console.log(e);for(var t=0;t<=e.length-1;t++)e[t].orderTime=this.formatTime(e[t].orderTime),e[t].customerUrl="http://140.113.123.90:9527/customer/"+e[t].id;return e}},{key:"formatTime",value:function(e){return e.split("T")[0]+" "+e.split("T")[1].split(".")[0]}},{key:"getOrders",value:function(e){e.length>0?this.setState({orderList:e}):this.setState({orderList:[]})}},{key:"setInputText",value:function(e){this.setState({inputText:e})}},{key:"searchOrder",value:function(){var e=this,t=this.state.inputText;g.a.get("".concat(N.SERVER_URL,"/search/?uid=").concat(t)).then(function(t){return e.getOrders(t.data.orders)}).catch(function(e){return console.log(e)}),this.setState({inputText:""})}},{key:"linkToCustomer",value:function(e){window.open("about:blank").location.href=e}},{key:"render",value:function(){var e=this,t=this.state.orderList;return console.log(t),r.a.createElement("div",{className:"container mt-4"},r.a.createElement("div",{className:"row justify-content-center"},r.a.createElement("div",{className:"input-group col-6"},r.a.createElement("input",{type:"text",className:"form-control",placeholder:"\u8acb\u8f38\u5165\u8a02\u55ae\u7de8\u865f",onChange:function(t){return e.setInputText(t.target.value)},"aria-label":"Username","aria-describedby":"addon-wrapping",value:this.state.inputText}),r.a.createElement("div",{className:"input-group-append"},r.a.createElement("button",{className:"btn btn-secondary",type:"button",onClick:function(){return e.searchOrder()}},"Search")))),r.a.createElement("table",{className:"table mt-3 table-custom mb-5 pb-5"},r.a.createElement("thead",{className:"thead-white mb-5"},r.a.createElement("tr",{className:"table-title"},r.a.createElement("th",{scope:"col"},"#"),r.a.createElement("th",{scope:"col"},"Product List"),r.a.createElement("th",{scope:"col"},"Total Price"),r.a.createElement("th",{scope:"col"},"Add to Cart"),r.a.createElement("th",{scope:"col"},"Address"),r.a.createElement("th",{scope:"col"},"Status"))),r.a.createElement("tbody",{className:"tbody-white"},t&&t.map(function(t,a){return r.a.createElement("tr",{key:t.id},r.a.createElement("th",{scope:"row"},a+1),r.a.createElement("td",null,t.itemList.map(function(e){return r.a.createElement("div",{key:e.id,className:"row justify-content-center mb-1  ml-1"},r.a.createElement("div",{className:"col px-0"},e.name,r.a.createElement("div",{className:"numItem text-muted"},"NT$",e.price)),r.a.createElement("div",{className:"text-right align-self-end col-3"},r.a.createElement("span",{className:"numItem"},e.itemCount)))})),r.a.createElement("td",null,"NT$",t.total_price),r.a.createElement("td",null,t.orderTime),r.a.createElement("td",null,t.address),r.a.createElement("td",null,0===t.status?r.a.createElement("button",{className:"btn btn-no",onClick:function(){return e.linkToCustomer(t.customerUrl)}},"\u5c1a\u672a\u51fa\u8ca8"):1===t.status?r.a.createElement("button",{className:"btn btn-depart",onClick:function(){return e.linkToCustomer(t.customerUrl)}},"\u51fa\u8ca8\u4e2d"):-1===t.status?r.a.createElement("button",{className:"btn btn-done",onClick:function(){return e.linkToCustomer(t.customerUrl)}},"\u5df2\u9001\u9054"):r.a.createElement("div",null,"Status Error")))}))),r.a.createElement("div",{className:"spacing"}))}}]),t}(n.Component),O=a(14),x=a.n(O),k=(a(87),function(e){e.text;return r.a.createElement("div",null,r.a.createElement("i",{style:{color:"#DD4B3E"},className:"fas fa-truck fa-2x"}))}),j=function(e){e.text;return r.a.createElement("div",null,r.a.createElement("i",{style:{color:"#4285F4"},className:"fas fa-male fa-3x"}))},D=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={driverList:[],center:{lat:0,lng:0},zoom:16},a.calculateCenter=a.calculateCenter.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){this.calculateCenter()}},{key:"calculateCenter",value:function(){var e={};e.lat=(this.props.customerAddress.lat+this.props.driverAddress.lat)/2,e.lng=(this.props.customerAddress.lng+this.props.driverAddress.lng)/2,this.setState({center:e})}},{key:"render",value:function(){var e=this.props;return r.a.createElement("div",{className:"map"},r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyBqb3GaYtbCdOMqq4ZAexpda3D3BD7WzII",language:"ru",region:"ru"},defaultZoom:this.state.zoom,defaultCenter:this.state.center},r.a.createElement(j,{lat:e.customerAddress.lat,lng:e.customerAddress.lng}),r.a.createElement(k,{lat:e.driverAddress.lat,lng:e.driverAddress.lng})))}}]),t}(n.Component),T=(a(88),a(15)),w=a.n(T),C=a(13),L=window.google,R=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={routeInfo:[],estimateTime:"",estimateDistance:"",isHouse:!1,isBoard:!1,isDone:!1},a.getRoute=a.getRoute.bind(Object(p.a)(a)),a.getDistanceMatrix=a.getDistanceMatrix.bind(Object(p.a)(a)),a.formatResponseTime=a.formatResponseTime.bind(Object(p.a)(a)),a.formatResponseDistance=a.formatResponseDistance.bind(Object(p.a)(a)),a.callback=a.callback.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.id;setInterval(function(){return g.a.get("".concat(C.CUSTOMER_URL,"/order/?uid=").concat(t)).then(function(t){return e.getRoute(t)}).catch(function(e){return console.log(e)})},3e3)}},{key:"getRoute",value:function(e){if(0===Object.keys(e).length)console.log("Nothing");else{var t=e.data.order[0].customerAddress,a=e.data.driverAddress,n=e.data.order[0].status,r=e.data.order;r[0].driverAddress=a,console.log(a),this.setState({routeInfo:r}),0===n?this.setState({isHouse:!0}):1===n?(this.setState({isBoard:!0}),this.getDistanceMatrix(t,a)):-1===n&&this.setState({isDone:!0})}}},{key:"getDistanceMatrix",value:function(e,t){var a=new L.maps.LatLng(e),n=new L.maps.LatLng(t);(new L.maps.DistanceMatrixService).getDistanceMatrix({origins:[a],destinations:[n],travelMode:"DRIVING",avoidHighways:!1,avoidTolls:!1},this.callback)}},{key:"callback",value:function(e,t){"OK"===t&&this.setState({estimateTime:this.formatResponseTime(e),estimateDistance:this.formatResponseDistance(e)})}},{key:"formatResponseTime",value:function(e){return e.rows[0].elements[0].duration.text}},{key:"formatResponseDistance",value:function(e){return e.rows[0].elements[0].distance.text}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S,null),r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"col"},r.a.createElement("div",{className:" mapFrame text-center align-items-center"},!0===this.state.isBoard?r.a.createElement(D,{customerAddress:this.state.routeInfo[0].customerAddress,driverAddress:this.state.routeInfo[0].driverAddress}):!0===this.state.isHouse?r.a.createElement("h2",{className:"textCenter text-muted my-auto"},"\u5c1a\u672a\u51fa\u8ca8\uff01"):!0===this.state.isDone?r.a.createElement("h2",{className:"textCenter text-muted my-auto"},"\u5df2\u5b8c\u6210\u8a02\u55ae\uff01"):r.a.createElement("h2",{className:"textCenter text-muted my-auto"},"\u7b49\u5f85\u4e2d...")),r.a.createElement("div",{className:"col mt-3 px-0"},1===this.state.routeInfo.length?r.a.createElement("div",{className:"card col-12 mb-3"},r.a.createElement("div",{className:"card-body w-100"},r.a.createElement("h5",{className:"card-title"},"\u60a8\u7684\u8a02\u55ae\uff1a",this.state.routeInfo[0].id),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"\u9810\u4f30\u5269\u9918\u6642\u9593\uff1a",this.state.estimateTime),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"\u9810\u4f30\u8ddd\u96e2\uff1a",this.state.estimateDistance),this.state.routeInfo[0].itemList.map(function(e){return r.a.createElement("div",{key:e.id,className:"row justify-content-center"},r.a.createElement("div",{className:"col"},e.name),r.a.createElement("div",{className:"text-right col"},r.a.createElement("span",{className:"numItem"},e.itemCount," * NT$",e.price)))}),r.a.createElement("h5",{className:"card-title text-right"},"\u7e3d\u8a08: NT$",this.state.routeInfo[0].total_price))):r.a.createElement("div",null)))))}}]),t}(n.Component),S=function(){return r.a.createElement("div",null,r.a.createElement("ul",{className:"nav justify-content-start align-items-center p-3"},r.a.createElement("img",{src:w.a,alt:"Logo",className:"align-self-start",style:{height:"10%",width:"10%"}})))},I=a(13),A=function(e){e.text;return r.a.createElement("div",null,r.a.createElement("i",{style:{color:"#DD4B3E"},className:"fas fa-truck fa-2x"}))},M=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={driverList:[],center:{lat:0,lng:0},zoom:16},a.getDriver=a.getDriver.bind(Object(p.a)(a)),a.calculateCenter=a.calculateCenter.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;setInterval(function(){return g.a.get("".concat(I.SERVER_URL,"/manage")).then(function(t){return e.getDriver(t.data.drivers)}).catch(function(e){return console.log(e)})},2e3)}},{key:"getDriver",value:function(e){console.log(e),this.setState({driverList:e}),this.calculateCenter(e)}},{key:"calculateCenter",value:function(e){if(e.length>0){for(var t=0,a=0,n=0;n<=e.length-1;n++)t+=e[n].lat,a+=e[n].lng;var r={};r.lat=t/e.length,r.lng=a/e.length,this.setState({center:r})}else{var c={lat:24.7838,lng:120.9962};this.setState({center:c})}}},{key:"render",value:function(){var e=this.state.driverList;return r.a.createElement("div",{style:{height:"60vh",width:"100%"}},r.a.createElement(x.a,{bootstrapURLKeys:{key:"AIzaSyBqb3GaYtbCdOMqq4ZAexpda3D3BD7WzII"},center:this.state.center,defaultZoom:this.state.zoom},e&&e.map(function(e){return r.a.createElement(A,{key:e.driverID,lat:e.lat,lng:e.lng})})))}}]),t}(n.Component),U=(a(89),a(13)),B=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={driverList:[]},a.getDriver=a.getDriver.bind(Object(p.a)(a)),a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"componentDidMount",value:function(){var e=this;g.a.get("".concat(U.SERVER_URL,"/manage")).then(function(t){return e.getDriver(t.data.drivers)}).catch(function(e){return console.log(e)})}},{key:"getDriver",value:function(e){this.setState({driverList:e})}},{key:"render",value:function(){return r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row mapFrame text-center align-items-center"},r.a.createElement(M,null)),r.a.createElement("div",{className:"row mt-3 align-items-center justify-content-center"},this.state.driverList&&this.state.driverList.map(function(e){return r.a.createElement("div",{key:e.driverID,className:"card-custom align-self-start col mr-3",style:{width:"18rem"}},r.a.createElement("div",{className:"card-body"},r.a.createElement("h5",{className:"card-title"},e.name),r.a.createElement("h6",{className:"card-subtitle mb-2 text-muted"},"Driver Information")))})))}}]),t}(n.Component),_=(a(90),function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e))).state={driverList:[]},a}return Object(h.a)(t,e),Object(m.a)(t,[{key:"render",value:function(){return r.a.createElement("div",{className:"footer "},r.a.createElement("p",null,"\xa9 Copyright LogisTalk 2019",r.a.createElement("i",{className:"fab fa-facebook-square fa-2x text-light fb-icon"}),r.a.createElement("i",{className:"fab fa-github-square fa-2x text-light mx-2"}),r.a.createElement("i",{className:"fas fa-envelope fa-2x text-light"})))}}]),t}(n.Component)),q=function(){return r.a.createElement("div",{className:"nav-custom"},r.a.createElement("ul",{className:"nav justify-content-start align-items-center p-3"},r.a.createElement("img",{src:w.a,alt:"Logo",className:"align-self-start",style:{height:"10%",width:"10%"}}),r.a.createElement("li",{className:"nav-item ml-3"},r.a.createElement("a",{className:"nav-link",href:"/"},"Home")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/manage"},"Manage")),r.a.createElement("li",{className:"nav-item"},r.a.createElement("a",{className:"nav-link",href:"/searchOrder"},"Search"))))},z=function(){return r.a.createElement("div",null,"Error 404")};var V=function(){return r.a.createElement(l.a,null,r.a.createElement("div",null,r.a.createElement(i.a,{path:"/manage",component:q}),r.a.createElement(i.a,{path:"/searchOrder",component:q}),r.a.createElement(i.a,{exact:!0,path:"/",component:q}),r.a.createElement(i.c,null,r.a.createElement(i.a,{exact:!0,path:"/",component:E}),r.a.createElement(i.a,{path:"/manage",component:B}),r.a.createElement(i.a,{path:"/searchOrder",component:y}),r.a.createElement(i.a,{path:"/customer/:id",component:R}),r.a.createElement(i.a,{component:z})),r.a.createElement(i.a,{path:"/",component:_})))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(r.a.createElement(V,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[39,1,2]]]);
//# sourceMappingURL=main.5a5db00e.chunk.js.map